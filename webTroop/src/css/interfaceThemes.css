/* Dark Theme */
:root {
    --bg-col-1: #2b2b2b;
    --bg-col-2: #333;
    --border-col-1: #666;
    --border-col-2: #555;
    --text-col-1: #ECDFCC;
    --text-col-2: #e0e0e0;
    --beat-col-1: #3c3c3c;
    --beat-col-2: #FFAA4478;
    --col-red: rgba(155, 41, 41, 0.75);
    --col-green: rgba(71, 155, 41, 0.75);
    --col-blue: rgba(41, 96, 155, 0.75);
    --col-full-red: rgb(219, 85, 85);
    --col-full-green: rgb(112, 207, 78);
    --col-full-blue: rgb(77, 139, 206);
    --flash-col: rgba(255, 202, 40, 0.5);
}

/* Light Theme */
:root.light-theme {
    --bg-col-1: #f5f5f5;
    --bg-col-2: #e0e0e0;
    --border-col-1: #ccc;
    --border-col-2: #bbb;
    --text-col-1: #333;
    --text-col-2: #555;
    --beat-col-1: #ddd;
    --beat-col-2: #ffcc00;
    --col-red: rgba(155, 41, 41, 0.75);
    --col-green: rgba(71, 155, 41, 0.75);
    --col-blue: rgba(41, 96, 155, 0.75);
    --col-full-red: rgba(155, 41, 41);
    --col-full-green: rgba(71, 155, 41);
    --col--full-blue: rgba(41, 96, 155);
    --flash-col: rgba(255, 202, 40, 0.5);
}

/* CyberPunk theme */
:root.cyberpunk-theme {
    --bg-col-1: #0a0a16;
    --bg-col-2: #1a1a2e;
    --border-col-1: #ff2e97;
    --border-col-2: #00f6ff;
    --text-col-1: #00ff9f;
    --text-col-2: #ff2e97;
    --beat-col-1: #1a1a2e;
    --beat-col-2: #ff2e9755;
    --col-red: rgba(255, 0, 84, 0.75);
    --col-green: rgba(27, 192, 129, 0.75);
    --col-blue: rgba(0, 246, 255, 0.75);
    --col-full-red: #ff0054;
    --col-full-green: #00ff9f;
    --col-full-blue: #00f6ff;
    --flash-col: rgba(255, 46, 151, 0.5);
}

/* Synthwave Theme */
:root.synthwave-theme {
    --bg-col-1: #241734;
    --bg-col-2: #2a1b3d;
    --border-col-1: #ff00ff;
    --border-col-2: #00ffff;
    --text-col-1: #ff71ce;
    --text-col-2: #b967ff;
    --beat-col-1: #332359;
    --beat-col-2: #ff71ce55;
    --col-red: rgba(255, 113, 206, 0.75);
    --col-green: rgba(1, 255, 198, 0.75);
    --col-blue: rgba(0, 255, 255, 0.75);
    --col-full-red: #ff71ce;
    --col-full-green: #01ffc6;
    --col-full-blue: #00ffff;
    --flash-col: rgba(185, 103, 255, 0.5);
}

/* Forest Theme */
:root.forest-theme {
    --bg-col-1: #1a2f1a;
    --bg-col-2: #233d23;
    --border-col-1: #5c8b3c;
    --border-col-2: #2d5a27;
    --text-col-1: #9cce6a;
    --text-col-2: #c4e2a6;
    --beat-col-1: #2d4a2d;
    --beat-col-2: #5c8b3cd1;
    --col-red: rgba(201, 68, 68, 0.75);
    --col-green: rgba(92, 139, 60, 0.75);
    --col-blue: rgba(60, 139, 127, 0.75);
    --col-full-red: #c94444;
    --col-full-green: #5c8b3c;
    --col-full-blue: #3c8b7f;
    --flash-col: rgba(156, 206, 106, 0.5);
}

/* Ocean Theme */
:root.ocean-theme {
    --bg-col-1: #0a2635;
    --bg-col-2: #0f3447;
    --border-col-1: #2d9cb4;
    --border-col-2: #1a7b8f;
    --text-col-1: #8be0f7;
    --text-col-2: #64c5e8;
    --beat-col-1: #153f54;
    --beat-col-2: #2d9cb455;
    --col-red: rgba(242, 90, 90, 0.75);
    --col-green: rgba(90, 242, 203, 0.75);
    --col-blue: rgba(45, 156, 180, 0.75);
    --col-full-red: #f25a5a;
    --col-full-green: #5af2cb;
    --col-full-blue: #2d9cb4;
    --flash-col: rgba(139, 224, 247, 0.5);
}

/* Desert Theme */
:root.desert-theme {
    --bg-col-1: #2b1810;
    --bg-col-2: #3d2317;
    --border-col-1: #d4804e;
    --border-col-2: #a65d32;
    --text-col-1: #ffd700;
    --text-col-2: #ffa500;
    --beat-col-1: #4a2b1d;
    --beat-col-2: #d4804e55;
    --col-red: rgba(217, 80, 48, 0.75);
    --col-green: rgba(171, 145, 68, 0.75);
    --col-blue: rgba(95, 158, 160, 0.75);
    --col-full-red: #d95030;
    --col-full-green: #ab9144;
    --col-full-blue: #5f9ea0;
    --flash-col: rgba(255, 215, 0, 0.5);
}

/* Minimal Theme */
:root.minimal-theme {
    --bg-col-1: #ffffff;
    --bg-col-2: #f8f9fa;
    --border-col-1: #dee2e6;
    --border-col-2: #ced4da;
    --text-col-1: #212529;
    --text-col-2: #495057;
    --beat-col-1: #e9ecef;
    --beat-col-2: #4263eb55;
    --col-red: rgba(250, 82, 82, 0.75);
    --col-green: rgba(64, 192, 87, 0.75);
    --col-blue: rgba(66, 99, 235, 0.75);
    --col-full-red: #fa5252;
    --col-full-green: #40c057;
    --col-full-blue: #4263eb;
    --flash-col: rgba(66, 99, 235, 0.3);
}

/* Nord Theme */
:root.nord-theme {
    --bg-col-1: #2e3440;
    --bg-col-2: #3b4252;
    --border-col-1: #434c5e;
    --border-col-2: #4c566a;
    --text-col-1: #eceff4;
    --text-col-2: #d8dee9;
    --beat-col-1: #434c5e;
    --beat-col-2: #88c0d055;
    --col-red: rgba(191, 97, 106, 0.75);
    --col-green: rgba(163, 190, 140, 0.75);
    --col-blue: rgba(136, 192, 208, 0.75);
    --col-full-red: #bf616a;
    --col-full-green: #a3be8c;
    --col-full-blue: #88c0d0;
    --flash-col: rgba(136, 192, 208, 0.3);
}

/* Tokyo Night Theme */
:root.tokyo-theme {
    --bg-col-1: #1a1b26;
    --bg-col-2: #24283b;
    --border-col-1: #414868;
    --border-col-2: #565f89;
    --text-col-1: #a9b1d6;
    --text-col-2: #787c99;
    --beat-col-1: #24283b;
    --beat-col-2: #7aa2f755;
    --col-red: rgba(247, 118, 142, 0.75);
    --col-green: rgba(158, 206, 106, 0.75);
    --col-blue: rgba(122, 162, 247, 0.75);
    --col-full-red: #f7768e;
    --col-full-green: #9ece6a;
    --col-full-blue: #7aa2f7;
    --flash-col: rgba(122, 162, 247, 0.3);
}

/* Monokai Pro Theme */
:root.monokai-theme {
    --bg-col-1: #2d2a2e;
    --bg-col-2: #363537;
    --border-col-1: #494745;
    --border-col-2: #5b5553;
    --text-col-1: #fcfcfa;
    --text-col-2: #c1c0c0;
    --beat-col-1: #363537;
    --beat-col-2: #a9dc7655;
    --col-red: rgba(255, 97, 136, 0.75);
    --col-green: rgba(169, 220, 118, 0.75);
    --col-blue: rgba(120, 220, 232, 0.75);
    --col-full-red: #ff6188;
    --col-full-green: #a9dc76;
    --col-full-blue: #78dce8;
    --flash-col: rgba(169, 220, 118, 0.3);
}

/* Green Terminal Theme (classique Matrix style) */
:root.green-terminal-theme {
    --bg-col-1: #000000;
    --bg-col-2: #001100;
    --border-col-1: #00aa00;
    --border-col-2: #00ff00;
    --text-col-1: #00ff00;
    --text-col-2: #00dd00;
    --beat-col-1: #001100;
    --beat-col-2: #00ff0055;
    --col-red: rgba(255, 68, 68, 0.75);
    --col-green: rgba(0, 255, 0, 0.75);
    --col-blue: rgba(68, 255, 255, 0.75);
    --col-full-red: #ff4444;
    --col-full-green: #00ff00;
    --col-full-blue: #44ffff;
    --flash-col: rgba(0, 255, 0, 0.5);
}

/* Amber Terminal Theme (VT100 classique) */
:root.amber-terminal-theme {
    --bg-col-1: #1a0a00;
    --bg-col-2: #2a1100;
    --border-col-1: #ff8800;
    --border-col-2: #ffaa00;
    --text-col-1: #ffaa00;
    --text-col-2: #ff8800;
    --beat-col-1: #2a1100;
    --beat-col-2: #ffaa0055;
    --col-red: rgba(255, 68, 68, 0.75);
    --col-green: rgba(68, 255, 68, 0.75);
    --col-blue: rgba(68, 68, 255, 0.75);
    --col-full-red: #ff4444;
    --col-full-green: #44ff44;
    --col-full-blue: #4444ff;
    --flash-col: rgba(255, 170, 0, 0.5);
}

/* White Terminal Theme (IBM terminal) */
:root.white-terminal-theme {
    --bg-col-1: #000000;
    --bg-col-2: #111111;
    --border-col-1: #aaaaaa;
    --border-col-2: #ffffff;
    --text-col-1: #ffffff;
    --text-col-2: #cccccc;
    --beat-col-1: #222222;
    --beat-col-2: #ffffff55;
    --col-red: rgba(255, 68, 68, 0.75);
    --col-green: rgba(68, 255, 68, 0.75);
    --col-blue: rgba(68, 68, 255, 0.75);
    --col-full-red: #ff4444;
    --col-full-green: #44ff44;
    --col-full-blue: #4444ff;
    --flash-col: rgba(255, 255, 255, 0.5);
    background-image: repeating-linear-gradient(
        90deg,
        transparent,
        transparent 2px,
        rgba(255, 255, 255, 0.6) 2px,
        rgba(255, 255, 255, 0.6) 4px
    );
    color: #ffffff;
}

/* Blue Terminal Theme (IBM 3270) */
:root.blue-terminal-theme {
    --bg-col-1: #000033;
    --bg-col-2: #000044;
    --border-col-1: #4488ff;
    --border-col-2: #66aaff;
    --text-col-1: #66aaff;
    --text-col-2: #4488ff;
    --beat-col-1: #000044;
    --beat-col-2: #66aaff55;
    --col-red: rgba(255, 68, 68, 0.75);
    --col-green: rgba(68, 255, 68, 0.75);
    --col-blue: rgba(102, 170, 255, 0.75);
    --col-full-red: #ff4444;
    --col-full-green: #44ff44;
    --col-full-blue: #66aaff;
    --flash-col: rgba(102, 170, 255, 0.5);
}

/* Container principal avec courbure d'écran et vignette */
:root.retro-terminal-theme body {
    position: relative;
    overflow: hidden;
}

:root.retro-terminal-theme body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
        radial-gradient(ellipse at center, transparent 50%, rgba(0, 0, 0, 0.3) 100%),
        repeating-linear-gradient(
            0deg,
            transparent,
            transparent 2px,
            rgba(0, 255, 0, 0.015) 2px,
            rgba(0, 255, 0, 0.015) 4px
        );
    /* animation: scanlines 8s linear infinite, noise 0.5s infinite; */
    pointer-events: none;
    z-index: 1000;
}

:root.retro-terminal-theme #main-container {
    filter: 
        contrast(1.1) 
        brightness(1.05) 
        saturate(1.1);
    border-radius: 15px;
    overflow: hidden;
    box-shadow: 
        inset 0 0 30px rgba(0, 255, 0, 0.08),
        0 0 15px rgba(0, 255, 0, 0.15);
}

/* Effets spéciaux pour le thème rétro terminal - optimisé pour les performances */

:root.retro-terminal-theme .crash-panel,
:root.retro-terminal-theme .config-panel,
:root.retro-terminal-theme .logPanel {
    box-shadow: 0 0 3px rgba(0, 255, 0, 0.15);
    border: 1px solid rgba(0, 255, 0, 0.3);
    background: var(--bg-col-1);
}

:root.retro-terminal-theme fieldset {
    border-color: var(--border-col-1);
    box-shadow: 0 0 5px rgba(0, 255, 0, 0.2);
}

:root.retro-terminal-theme legend {
    color: var(--text-col-1);
    text-shadow: 0 0 5px currentColor;
    font-weight: bold;
}

:root.retro-terminal-theme input,
:root.retro-terminal-theme select,
:root.retro-terminal-theme button {
    background-color: var(--bg-col-2);
    border: 1px solid var(--border-col-1);
    color: var(--text-col-1);
    text-shadow: 0 0 3px currentColor;
}

:root.retro-terminal-theme input:focus,
:root.retro-terminal-theme select:focus {
    border-color: var(--border-col-2);
    box-shadow: 0 0 8px rgba(0, 255, 0, 0.4);
    outline: none;
}

:root.retro-terminal-theme button:hover {
    background-color: var(--bg-col-1);
    box-shadow: 0 0 10px rgba(0, 255, 0, 0.5);
}

:root.retro-terminal-theme .toggle-switch {
    background-color: var(--bg-col-2);
    border: 1px solid var(--bg-col-2);
}

:root.retro-terminal-theme .toggle-switch:checked {
    background-color: var(--col-full-green);
    box-shadow: 0 0 8px rgba(0, 255, 0, 0.6);
}

/* Effets de courbure d'écran CRT */
:root.retro-terminal-theme #editor-container,
:root.retro-terminal-theme .crash-panel {
    transform: perspective(1000px) rotateX(0.5deg);
    border-radius: 8px;
}

/* Scintillement subtil pour les éléments interactifs - désactivé pour les performances */

/* Lueur phosphorescente subtile pour les textes importants - optimisé */
:root.retro-terminal-theme h1, 
:root.retro-terminal-theme h2, 
:root.retro-terminal-theme h3,
:root.retro-terminal-theme legend {
    text-shadow: 
        0 0 2px currentColor;
    /* animation supprimée pour les performances */
}

/* Effet de barre de progression avec glow */
:root.retro-terminal-theme .info-text {
    background: 
        linear-gradient(90deg, 
            rgba(0, 255, 0, 0.1) 0%, 
            rgba(0, 255, 0, 0.05) 50%, 
            rgba(0, 255, 0, 0.1) 100%
        );
    border: 1px solid rgba(0, 255, 0, 0.2);
    border-radius: 3px;
    box-shadow: 
        inset 0 0 10px rgba(0, 255, 0, 0.1),
        0 0 5px rgba(0, 255, 0, 0.2);
}

/* Bruit vidéo sur les conteneurs principaux - désactivé pour les performances */
:root.retro-terminal-theme .crash-panel::after,
:root.retro-terminal-theme #editor-container::after {
    /* Effet désactivé pour améliorer les performances GPU */
    display: none;
}

/* Effet de dégradé vertical pour simuler un écran CRT */
:root.retro-terminal-theme body::after {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: 
        linear-gradient(
            0deg,
            rgba(0, 0, 0, 0.1) 0%,
            transparent 10%,
            transparent 90%,
            rgba(0, 0, 0, 0.1) 100%
        );
    pointer-events: none;
    z-index: 999;
}

/* Amélioration des scrollbars avec effet glow */
:root.retro-terminal-theme ::-webkit-scrollbar {
    width: 12px;
    background: rgba(0, 0, 0, 0.8);
}

:root.retro-terminal-theme ::-webkit-scrollbar-track {
    background: rgba(0, 50, 0, 0.3);
    border: 1px solid rgba(0, 255, 0, 0.2);
}

:root.retro-terminal-theme ::-webkit-scrollbar-thumb {
    background: linear-gradient(180deg, #00ff00, #00aa00);
    border-radius: 6px;
    box-shadow: 
        0 0 5px rgba(0, 255, 0, 0.5),
        inset 0 0 5px rgba(0, 255, 0, 0.2);
}

:root.retro-terminal-theme ::-webkit-scrollbar-thumb:hover {
    background: linear-gradient(180deg, #44ff44, #00dd00);
    box-shadow: 
        0 0 10px rgba(0, 255, 0, 0.8),
        inset 0 0 5px rgba(0, 255, 0, 0.3);
}